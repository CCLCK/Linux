[toc]

å­¦ä¹ ä¿¡å·è¿™ä¸ªæ–°çŸ¥è¯†ï¼Œä»ä¿¡å·æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆï¼ˆæœ‰ä¿¡å·ï¼‰ï¼Œæ€ä¹ˆåŠï¼ˆä¿¡å·æ€ä¹ˆç”¨ï¼‰ä¸‰ä¸ªè§’åº¦å…¥æ‰‹ã€‚

# ä¿¡å·æ˜¯ä»€ä¹ˆï¼Ÿ

> åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œä¿¡å·æ˜¯Unixã€ç±»Unixä»¥åŠå…¶ä»–POSIXå…¼å®¹çš„æ“ä½œç³»ç»Ÿä¸­è¿›ç¨‹é—´é€šè®¯çš„ä¸€ç§æœ‰é™åˆ¶çš„æ–¹å¼ã€‚å®ƒæ˜¯ä¸€ç§å¼‚æ­¥çš„é€šçŸ¥æœºåˆ¶ï¼Œç”¨æ¥æé†’è¿›ç¨‹ä¸€ä¸ªäº‹ä»¶å·²ç»å‘ç”Ÿã€‚å½“ä¸€ä¸ªä¿¡å·å‘é€ç»™ä¸€ä¸ªè¿›ç¨‹ï¼Œæ“ä½œç³»ç»Ÿä¸­æ–­äº†è¿›ç¨‹æ­£å¸¸çš„æ§åˆ¶æµç¨‹ï¼Œæ­¤æ—¶ï¼Œä»»ä½•é[åŸå­æ“ä½œ](https://baike.baidu.com/item/åŸå­æ“ä½œ/1880992)éƒ½å°†è¢«ä¸­æ–­ã€‚å¦‚æœè¿›ç¨‹å®šä¹‰äº†ä¿¡å·çš„å¤„ç†å‡½æ•°ï¼Œé‚£ä¹ˆå®ƒå°†è¢«æ‰§è¡Œï¼Œå¦åˆ™å°±æ‰§è¡Œé»˜è®¤çš„å¤„ç†å‡½æ•°ã€‚--ç™¾åº¦ç™¾ç§‘

ç®€å•æ¥è¯´ï¼Œä¿¡å·å°±æ˜¯ä¸€ç§é€šçŸ¥æœºåˆ¶ã€‚æƒ³æƒ³æˆ‘ä»¬ç”Ÿæ´»é‡Œçš„ä¿¡å·ï¼Œçº¢ç¯åœç»¿ç¯è¡Œï¼Œçº¢ç¯â€œé€šçŸ¥â€æˆ‘ä»¬ç°åœ¨ä¸èƒ½èµ°ï¼Œå¾—è¦ç­‰ç»¿ç¯ã€‚å¤ä»£çš„çƒ½ç«ï¼Œé€šçŸ¥å£«å…µæœ‰æ•Œäººç­‰ç­‰ï¼Œè¿™äº›éƒ½æ˜¯ä¿¡å·ã€‚é‚£Linuxé‡Œçš„ä¿¡å·å‘¢ï¼Ÿç”Ÿæ´»ä¸­å¾ˆå¤šä¿¡å·é€šçŸ¥çš„æ˜¯äººï¼Œä¿¡å·é€šçŸ¥çš„å°±æ˜¯è¿›ç¨‹ï¼Œæ¯”å¦‚å­è¿›ç¨‹ç»“æŸåå°±å‘ä¸€ä¸ªä¿¡å·é€šçŸ¥çˆ¶è¿›ç¨‹æˆ‘ç»“æŸäº†ã€‚å†æ¯”å¦‚æˆ‘ä»¬é€šè¿‡é”®ç›˜å‘é€ä¸€ä¸ªä¿¡å·å‘Šè¯‰è¿›ç¨‹ä½ è¦åœä¸‹æ¥äº†ã€‚

Linuxçš„ä¿¡å·åˆ†ä¸ºæ™®é€šä¿¡å·å’Œå®æ—¶ä¿¡å·ï¼Œä¸€å…±æœ‰64ä¸ªï¼Œ1-31ä¸ºæ™®é€šä¿¡å·ï¼Œ34-64ä¸ºå®æ—¶ä¿¡å·ï¼Œè¿™é‡Œä¸»è¦äº†è§£æ™®é€šä¿¡å·ã€‚

> 32å’Œ33è¢«çº¿ç¨‹åº“å¾ç”¨äº†ã€‚è¿™é‡Œå»æ¢ç©¶æ€»å…±æœ‰å¤šå°‘ä¸ªå®æ—¶ä¿¡å·æ„ä¹‰ä¹Ÿä¸å¤§...ï¼ˆæœ‰äº›è¯´33-64ï¼Œæœ‰äº›è¯´34-63ï¼Œè‡³äºå“ªç§æ˜¯å¯¹çš„æˆ‘ä¹Ÿä¸å¾—è€ŒçŸ¥ï¼Œä¸è¿‡æ„ä¹‰ä¹Ÿä¸å¤§ï¼‰
>
> æˆ‘ä»¬å½“å‰åªå…³æ³¨1-31å·ä¿¡å·ã€‚

- **kill -læŸ¥çœ‹æ‰€æœ‰å‘½ä»¤ã€‚**

![image-20220726164828368](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220726164828368.png)

## æ™®é€šä¿¡å·åˆ†åˆ«å¯¹åº”çš„ä½œç”¨

ğŸ‘‰[Linuxä¿¡å·åˆ—è¡¨åŠå…¶è¯¦è§£ ](https://cloud.tencent.com/developer/article/1433358)

# ä¿¡å·çš„ä½œç”¨

ç”¨äºè¿›ç¨‹é—´é€šä¿¡ã€‚

> ä¸€ç‚¹ç¢ç¢å¿µï¼Œå¦‚æœæŠŠè¿™ä¸ªé—®é¢˜å˜ä¸ºæ¢è®¨ä¸ºä»€ä¹ˆæœ‰ä¿¡å·ï¼Œè¿™ä¸ªé—®é¢˜å°±å˜å¾—å“²å­¦äº†èµ·æ¥ï¼Œç™¾åº¦å‘Šè¯‰æˆ‘ä¿¡å·æ˜¯linuxç³»ç»Ÿä¸ºäº†å“åº”æŸäº›çŠ¶å†µè€Œäº§ç”Ÿçš„äº‹ä»¶ï¼Œå¬èµ·æ¥æŒºæŠ½è±¡çš„ï¼Œè¿™å°±å¥½ä¼¼é—®ä¸ºä»€ä¹ˆè¦æœ‰çº¢ç»¿ç¯ã€‚ã€‚ã€‚æˆ‘å¤§è€Œç²—ç•¥çš„è®¤ä¸ºä¿¡å·æœ‰åˆ©äºç³»ç»Ÿä¸è¿›ç¨‹çš„é€šä¿¡ï¼Œè®©ä»–ä»¬ä¸¤ä¸ªæ›´å¥½çš„äº¤æµï¼Œæ˜¯å¯¹æ“ä½œç³»ç»Ÿæœ‰åˆ©çš„ä¸€ç§æœºåˆ¶ã€‚ï¼ˆå°±æ¯”å¦‚çº¢ç»¿ç¯æœ‰åˆ©äºäº¤é€šå®‰å…¨ï¼‰

# ä¿¡å·çš„äº§ç”Ÿ

> ä¿¡å·æ€ä¹ˆç”¨ï¼Œè¿™ä¸ªé—®é¢˜ä¹Ÿå¾ˆå¤§ï¼Œæ‰€ä»¥ä¸‹é¢ä»…æ˜¯ä¿¡å·çš„ç®€å•å…¥é—¨ã€‚

ä¿¡å·çš„äº§ç”Ÿæœ‰ä¸‰ç§æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡é”®ç›˜ã€killå‘½ä»¤å’Œè½¯ç¡¬ä»¶æ¡ä»¶äº§ç”Ÿã€‚

## é”®ç›˜

æˆ‘ä»¬å¸¸ç”¨çš„ctrl+cå°±æ˜¯å…¸å‹çš„å‘è¿›ç¨‹å‘é€ä¸€ä¸ª2å·ä¿¡å·ã€‚

> ä¿¡å·ä¸åŒï¼Œæ•ˆæœä¸åŒã€‚å¯¹äºç›¸å½“ä¸€éƒ¨åˆ†ä¿¡å·ï¼Œè¿›ç¨‹æ”¶åˆ°åçš„å¤„ç†éƒ½æ˜¯ç»ˆæ­¢è¿›ç¨‹ï¼Œå½“ç„¶ä¹Ÿæœ‰ä¸€äº›ä¿¡å·å¯ä»¥æš‚åœè¿›ç¨‹çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰è¿›ç¨‹å¯¹æŸä¸ªä¿¡å·çš„å¤„ç†ã€‚
>
> ctrl+cç”¨äºä¸­æ–­å‰å°è¿›ç¨‹ï¼Œè¿è¡Œå‘½ä»¤ååŠ ä¸€ä¸ªâ€˜&â€™è¡¨ç¤ºåå°è¿è¡Œï¼Œè¿™æ ·Shellå¯ä»¥æ¥å—æ–°çš„å‘½ä»¤å¯åŠ¨æ–°çš„è¿›ç¨‹

```c++
#include <iostream>
#include<unistd.h>
#include<cstdio>
using namespace std;
int main()
{
  while(1)
  {
    printf("ck is a good man!\n");
    sleep(1);
  }
  return 0;
}
```

![image-20220726171318092](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220726171318092.png)

> å¸¸ç”¨çš„è¿˜æœ‰ctrl+z,ctrl+\ç­‰ç­‰ï¼Œctrl+zå¯¹åº”20å·ä¿¡å·ï¼Œåœæ­¢è¿›ç¨‹çš„è¿è¡Œï¼Œctrl+\å¯¹åº”ä¸‰å·ä¿¡å·ï¼Œè¿›ç¨‹æ”¶åˆ°è¿™ä¸ªè¿›ç¨‹é€€å‡ºåä¼šç”Ÿæˆä¸€ä¸ªcoreæ–‡ä»¶ï¼Œcoreæ–‡ä»¶æ˜¯å†…å­˜çš„æ˜ åƒï¼Œç¨‹åºå´©æºƒæ—¶å­˜å‚¨ç›¸å…³ä¿¡æ¯åˆ©äºè°ƒè¯•æ‰¾é”™è¯¯ï¼ˆè¿™ä¸ªä¹‹åä¼šæåˆ°ï¼‰

## kill å‘½ä»¤

ä¸‹é¢ä»¥é€šè¿‡killå‘½ä»¤å¯¹æ­»å¾ªç¯çš„è¿›ç¨‹å‘é€2å·ä¿¡å·ä¸ºä¾‹ã€‚

å³kill -2 PID.

> kill -ä¿¡å·åå­— PID.

![image-20220726173840342](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220726173840342.png)ä¸Šé¢è¿™ä¸ªä¾‹å­å†™æˆkill -SIGINT 5982ä¹Ÿå¯ä»¥ã€‚

## ç³»ç»Ÿå‡½æ•°

### killå‡½æ•°

int kill(pid_t pid, int sig);

ç»™è¿›ç¨‹å·ä¸ºPIDçš„è¿›ç¨‹å‘é€ä¿¡å·ç¼–å·ä¸ºsigçš„ä¿¡å·

![image-20220727000409592](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727000409592.png)

ä¾‹å­

ä¸€æ¡è¯­å¥æ‰“å°10æ¬¡åç»ˆæ­¢è¿›ç¨‹ï¼Œåˆ©ç”¨2å·ä¿¡å·ã€‚

> kill(getpid(),2)

```cpp
#include <iostream>
#include<unistd.h>
#include<sys/types.h>
#include <signal.h>
#include<cstdio>
using namespace std;
int main()
{
  int cnt=10;
  while(1)
  {
    printf("ck is a good man!\n");
    sleep(1);
    cnt--;
    if(cnt==0)
    {
      kill(getpid(),2);//å‘é€2å·ä¿¡å·
      printf("signo:2\n");
    }
  }
  return 0;
}
```



![image-20220727001329046](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727001329046.png)

### raiseå‡½æ•°

 int raise(int sig);

è‡ªå·±ç»™è‡ªå·±å‘ä¿¡å·

![image-20220727001541456](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727001541456.png)

ä¾‹å­

```cpp
#include <iostream>
#include<unistd.h>
#include<sys/types.h>
#include <signal.h>
#include<cstdio>
using namespace std;


int main()
{
  int cnt=10;
  while(1)
  {
    printf("ck is a good man!\n");
    sleep(1);
    cnt--;
    if(cnt==0)
    {
      raise(3); 
    }
  }
  return 0;
}
```

![image-20220727001908478](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727001908478.png)



## è½¯ä»¶æ¡ä»¶äº§ç”Ÿä¿¡å·

å¯ä»¥ç†è§£ä¸ºæ»¡è¶³äº†æŸæ¡ä»¶å°±ä¼šäº§ç”Ÿä¿¡å·ï¼Œæ¯”å¦‚ç®¡é“ï¼Œå½“ç®¡é“è¯»ç«¯å…³é—­åï¼Œå†™ç«¯ä¸€ç›´åœ¨å†™ï¼ŒOSå°±ä¼šå‘ä¸€ä¸ªSIGPIPEçš„ä¿¡å·ç»“æŸæ‰è¿™ä¸ªè¿›ç¨‹ï¼Œè¿™é‡Œå°±æ»¡è¶³äº†è¯»ç«¯å…³é—­å†™ç«¯ä¸€ç›´åœ¨å†™çš„æ¡ä»¶ã€‚

è¿™é‡Œå†ä»‹ç»ä¸€ä¸ªä¾‹å­ï¼Œalarmå‡½æ•°ï¼Œå‡½æ•°ä½œç”¨æ˜¯å‘Šè¯‰å†…æ ¸åœ¨æŒ‡å®šæ—¶é—´åç»™å½“å‰è¿›ç¨‹å‘ä¸€ä¸ªå«åšSIGALRMçš„ä¿¡å·ï¼ˆä¿¡å·ç¼–å·ä¸º14ï¼‰ï¼Œé»˜è®¤çš„ä½œç”¨æ˜¯ç»ˆæ­¢æ‰è¿›ç¨‹ã€‚

![image-20220727003447412](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727003447412.png)

ä¾‹å­

ç»™è¿›ç¨‹è®¾å®šä¸€ä¸ª5sçš„é—¹é’Ÿï¼Œ5såé—¹é’Ÿå“å‘é€SIGALRMä¿¡å·ç»“æŸå½“å‰è¿›ç¨‹

```cpp
#include <iostream>
#include<unistd.h>
#include<sys/types.h>
#include <signal.h>
#include<cstdio>
using namespace std;
int main()
{
  alarm(5);
  while(1)
  {
    printf("ck is a good man!\n");
    sleep(1);
  } 
  return 0;
}
```

è¿è¡Œæ•ˆæœ

![image-20220727003815579](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727003815579.png)

## ç¡¬ä»¶å¼‚å¸¸äº§ç”Ÿä¿¡å·

åœ¨windowsä¸‹å†™ä»£ç ï¼Œè‚¯å®šæœ‰è¿‡ç¨‹åºå´©æºƒçš„æƒ…å†µï¼Œå¯¼è‡´å´©æºƒçš„æƒ…å†µå…¸å‹çš„æœ‰é™¤é›¶ï¼Œé‡æŒ‡é’ˆï¼Œè¶Šç•Œç­‰ç­‰ã€‚ä»ä¿¡å·çš„è§’åº¦çœ‹ï¼Œæ˜¯ç¡¬ä»¶æ£€æµ‹åˆ°äº†æŸäº›å¼‚å¸¸ç„¶åå‘Šè¯‰äº†å†…æ ¸ï¼Œå†…æ ¸å°±å‘é€ä¸€ä¸ªä¿¡å·ç»“æŸæ‰è¿™ä¸ªè¿›ç¨‹ã€‚

> OSæ˜¯æ€ä¹ˆå…·å¤‡è¯†åˆ«å¼‚å¸¸çš„èƒ½åŠ›çš„ï¼ŒOSæ˜¯è½¯ç¡¬ä»¶çš„ç®¡ç†è€…ï¼Œè‡ªç„¶å¯ä»¥çŸ¥é“ç¡¬ä»¶çš„åé¦ˆï¼Œè‡³äºæ˜¯è°å¹²çš„ï¼ˆè°è¶Šç•Œçš„ï¼‰ï¼ŒOSå…·å¤‡ç®¡ç†è¿›ç¨‹çš„èƒ½åŠ›ï¼ˆè¿™ä¹ˆè¯´å¾ˆæŠ½è±¡ï¼Œè¿™é‡Œæ²¡æœ‰æ·±ç©¶å…·ä½“çš„ç»†èŠ‚ï¼‰ï¼Œè‡ªç„¶æ˜¯å¯ä»¥çŸ¥é“å“ªä¸ªè¿›ç¨‹å¹²çš„ï¼ŒOSå†å‘é€ä¿¡å·ç»“æŸè¿™ä¸ªè¿›ç¨‹å³å¯ã€‚é™¤0æ—¶å‘é€çš„ä¿¡å·æ˜¯SIGFPEï¼Œè¶Šç•Œæ—¶å‘é€çš„æ˜¯SIGSEGVã€‚

**ç«™åœ¨è¯­è¨€çš„è§’åº¦å«ç¨‹åºå´©æºƒï¼Œç³»ç»Ÿçš„è§’åº¦æ˜¯OSç»™è¿›ç¨‹å‘äº†ä¿¡å·ã€‚**

å…³äºè¶Šç•Œï¼Œæ ˆçš„é™„è¿‘å¯èƒ½æ˜¯æˆ‘ä»¬è‡ªå·±çš„ç©ºé—´ï¼Œè€Œå¯èƒ½è®¿é—®åˆ°è‡ªå·±çš„ç©ºé—´å¯¼è‡´å¯èƒ½æ²¡æ£€æŸ¥å‡ºè¶Šç•Œã€‚

é™¤é›¶çš„ä¾‹å­

```cpp
#include <iostream>
#include<unistd.h>
#include<sys/types.h>
#include <signal.h>
#include<cstdio>
using namespace std;
int main()
{
  int a=1;
  int b=0;
  int c=a/b;
  return 0;
}
```

è¿è¡Œæ•ˆæœï¼šè¿è¡ŒåæŠ¥å¼‚å¸¸ï¼Œé€šè¿‡é€€å‡ºç çœ‹åˆ°ç›¸å…³ä¿¡å·

![image-20220727005143819](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727005143819.png)

> æ¯”å¦‚è¿™é‡Œçš„136,136-128=8ï¼Œå¯¹åº”çš„8å·ä¿¡å·SIGFPE

# ä¿¡å·çš„é˜»å¡ä¸é€’è¾¾

è¿™é‡Œéœ€è¦è°ˆä¸€ä¸ªæ¦‚å¿µæ˜¯ä¿¡å·çš„é˜»å¡å’Œé€’è¾¾ã€‚

![image-20220727103949014](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727103949014.png)



> ä¸‹é¢çš„è¿™å¹…å›¾æ˜¯æˆ‘è‡ªå·±æœ€å¼€å§‹çš„ç†è§£ï¼Œ**ä»…ä½œè®°å½•**ï¼Œå› ä¸ºå…¶ä¸­å°±ä½è¿™ä¸ªæè¿°å’Œé€’è¾¾å®¹æ˜“æ··æ·†ã€‚è¿™å°±æ˜¯è¯­æ–‡ä¸Šçš„ç†è§£äº†ï¼Œæˆ‘è¿™çš„å°±ä½æŒ‡çš„æ˜¯å‡†å¤‡å¥½äº†ï¼Œå½“å†…æ ¸æ€è¿”å›ç”¨æˆ·æ€çš„æ—¶å€™å°±å¯ä»¥æ‰§è¡Œäº†ã€‚
>
> ![image-20220727104047887](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727104047887.png)

ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œä¿¡å·ä¸æ˜¯ç«‹å³é€’è¾¾çš„ï¼Œè€Œæ˜¯åœ¨å†…æ ¸æ€åˆ‡å›ç”¨æˆ·æ€çš„æ—¶å€™è¿›è¡Œç›¸åº”æ£€æŸ¥ï¼Œæ£€æŸ¥åˆ°äº†æ‰§è¡Œä¿¡å·ç›¸åº”çš„åŠ¨ä½œã€‚å†…æ ¸æ€å’Œç”¨æˆ·æ€ä¸‹é¢ä¼šæã€‚

ä¿¡å·ä¸€æ—¦è¢«é˜»å¡å°±æ— æ³•é€’è¾¾äº†ï¼Œç›´åˆ°è§£é™¤é˜»å¡æ‰ä¼šé€’è¾¾ã€‚

# å†…æ ¸é‡Œçš„ä¿¡å·

![image-20220727105917841](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727105917841.png)

> ä»¥å›¾ä¸­ä¿¡æ¯ä¸ºä¾‹ï¼Œblockçš„01è¡¨ç¤ºæ˜¯å¦é˜»å¡ï¼Œpendingçš„01è¡¨ç¤ºæ˜¯å¦äº§ç”Ÿ
>
> SIGHUPå¯¹åº”çš„blockå’Œpendingéƒ½æ˜¯0ï¼Œå³æœªäº§ç”Ÿä¹Ÿæœªé˜»å¡
>
> SIGINTå¯¹åº”çš„blockä¸º0ï¼Œpendingä¸º1ï¼Œè¡¨ç¤ºä¿¡å·äº§ç”Ÿä¸”æœªé˜»å¡
>
> SIGQUITå¯¹åº”çš„10ï¼Œè¡¨ç¤ºä¿¡å·æœªäº§ç”Ÿä½†æ˜¯é˜»å¡äº†ï¼Œæ¢ç§è¯´æ³•ï¼Œä¿¡å·ä¸€æ—¦äº§ç”Ÿå°±ä¼šè¢«é˜»å¡
>
> SIGILLå¯¹åº”çš„11ï¼Œè¡¨ç¤ºä¿¡å·äº§ç”Ÿäº†ï¼Œä½†æ˜¯è¢«é˜»å¡äº†ï¼Œä¹Ÿå°±æ— æ³•é€’è¾¾ã€‚
>
> æ‰§è¡Œå‡½æ•°çš„åŠ¨ä½œæ‰å«é€’è¾¾ã€‚

- blockæ˜¯ä¸€ä¸ªå››ä¸ªå­—èŠ‚å¤§å°çš„ä½å›¾ï¼Œä»£è¡¨é˜»å¡ä¿¡å·é›†ï¼Œæœ‰äº›ä¹Ÿå«å±è”½ä¿¡å·é›†ï¼Œ0è¡¨ç¤ºä¿¡å·æœªé˜»å¡ï¼Œ1è¡¨ç¤ºä¿¡å·é˜»å¡ã€‚
- pendingæ˜¯ä¸€ä¸ªå››ä¸ªå­—èŠ‚å¤§å°çš„ä½å›¾ï¼Œè¡¨ç¤ºæœªå†³ä¿¡å·é›†ï¼Œ0å¯ä»¥çœ‹åšä¿¡å·æœªäº§ç”Ÿï¼Œ1è¡¨ç¤ºä¿¡å·äº§ç”Ÿäº†ã€‚**æ‰€ä»¥OSå‘é€ä¿¡å·çš„æœ¬è´¨å°±æ˜¯ä¿®æ”¹task_structï¼ˆé‡Œçš„æŒ‡é’ˆï¼‰æŒ‡å‘çš„pendingä½å›¾çš„å†…å®¹**
- handleræ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆæ•°ç»„ï¼ŒæŒ‡å‘ä¿¡å·çš„å…·ä½“æ‰§è¡Œæ–¹æ³•ã€‚
- é€šè¿‡ä¿¡å·ç¼–å·ä½œä¸ºç´¢å¼•æ‰¾åˆ°ä¿¡å·å¯¹åº”çš„å¤„ç†æ–¹å¼ï¼Œä¹Ÿå³handlerå…·ä½“æ‰§è¡Œå“ªä¸ªå‡½æ•°ã€‚
- æ£€æµ‹ä¿¡å·æ˜¯å¦é€’è¾¾ï¼Œæ˜¯å¦è¢«é˜»å¡ï¼Œéƒ½æ˜¯OSçš„ä»»åŠ¡ã€‚
- pendingä¸º1æ—¶OSå†å»çœ‹ç›¸åº”çš„blockï¼Œblockä¸º0è¡¨ç¤ºä¿¡å·æœªè¢«é˜»å¡å¯ä»¥é€’è¾¾

>task_structé‡Œä¿¡å·ç›¸å…³çš„ä¸€äº›ç»“æ„
>
>![image-20220727105432209](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727105432209.png)
>
>![image-20220727110001108](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727110001108.png)
>
>**sigset_tæ˜¯ä¸€ç§æ•°æ®ç±»å‹**ï¼Œè¡¨ç¤ºä½å›¾ï¼Œç³»ç»Ÿç»™äº†ä¸€äº›æ¥å£æ“ä½œè¿™ä¸ªä½å›¾ï¼Œä¸å»ºè®®æˆ‘ä»¬è‡ªå·±å»æ“ä½œè¿™ä¸ªä½å›¾ï¼Œå› ä¸ºæˆ‘ä»¬ä¸æ¸…æ¥šè¿™ä¸ªä½å›¾çš„å®ç°ï¼Œæ¯”å¦‚è¿™ä¸ªä½å›¾å¯èƒ½ä»¥charæ•°ç»„å®ç°ï¼Œä¹Ÿå¯èƒ½ä»¥ä¸€ä¸ªæ•°å­—ç­‰åˆ«çš„æ–¹æ³•å®ç°ï¼Œæ‰€ä»¥å»ºè®®ç”¨ç³»ç»Ÿç»™çš„æ¥å£ã€‚ï¼ˆè¿™ä¸ªç±»å‹ä¸åé¢ç³»ç»Ÿæ¥å£çš„ä½¿ç”¨å¼ºç›¸å…³ï¼‰
>
>sigset_tåœ¨æˆ‘å½“å‰çš„ç¯å¢ƒä¸‹æ˜¯ä¸‹é¢è¿™æ ·å®ç°çš„ï¼Œç”¨çš„æ•°ç»„ã€‚
>
>![image-20220727150155378](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727150155378.png)

# ä¿¡å·çš„å¤„ç†

## å¤„ç†çš„æ–¹å¼

1. é»˜è®¤æ–¹å¼ï¼ˆéƒ¨åˆ†æ˜¯ç»ˆæ­¢è¿›ç¨‹ï¼Œéƒ¨åˆ†æœ‰ç‰¹å®šçš„åŠŸèƒ½ï¼‰
2. å¿½ç•¥ä¿¡å·
3. è‡ªå®šä¹‰æ–¹å¼ï¼šæ•æ‰ä¿¡å·ï¼ˆåé¢ä¼šæåˆ°æ•æ‰ï¼‰

> æ•æ‰ä¿¡å·çš„æ„æ€æ˜¯æˆ‘ä»¬æŒ‡å®šäº†æŸä¸ªä¿¡å·çš„ä½œç”¨ï¼Œæ¯”å¦‚2å·ä¿¡å·æœ¬æ¥æ˜¯ä¸­æ–­è¿›ç¨‹ï¼Œç°åœ¨æˆ‘è‡ªå®šä¹‰ä¸ºæ‰“å°hello worldï¼Œè¿™å°±å«è‡ªå®šä¹‰ï¼Œå½“æˆ‘ä»¬è‡ªå®šä¹‰äº†æŸä¸ªä¿¡å·ï¼Œè¿›ç¨‹åˆæ”¶åˆ°äº†è¿™ä¸ªä¿¡å·ï¼Œå°±å¯ä»¥å«åšæ•æ‰åˆ°äº†ä¿¡å·ã€‚ç®€å•æ¥è¯´å°±æ˜¯æ‰§è¡Œè‡ªå®šä¹‰çš„åŠ¨ä½œ

## å¤„ç†çš„æ—¶æœº

è¿›ç¨‹æ”¶åˆ°ä¿¡å·å¹¶ä¸æ˜¯ç«‹å³å¤„ç†çš„ï¼Œè€Œæ˜¯åœ¨åˆé€‚çš„æ—¶å€™ã€‚

ä»€ä¹ˆæ˜¯åˆé€‚çš„æ—¶å€™ï¼Ÿä»å†…æ ¸æ€è½¬åˆ°ç”¨æˆ·æ€çš„æ—¶å€™å°±æ˜¯åˆé€‚çš„æ—¶å€™ã€‚

### ç”¨æˆ·æ€å’Œå†…æ ¸æ€

ä»€ä¹ˆæ˜¯å†…æ ¸æ€ï¼Ÿè®¿é—®å†…æ ¸ç©ºé—´æ—¶å°±æ˜¯å†…æ ¸æ€ã€‚

ä»€ä¹ˆæ˜¯ç”¨æˆ·æ€ï¼Ÿè®¿é—®ç”¨æˆ·ç©ºé—´æ—¶å°±æ˜¯ç”¨æˆ·æ€ã€‚

å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´åˆæ˜¯ä»€ä¹ˆï¼Ÿ32ä½çš„è¿›ç¨‹åœ°å€ç©ºé—´å°±æ˜¯4Gï¼Œ3-4Gå°±æ˜¯å†…æ ¸ç©ºé—´ï¼Œ0-3Gå°±æ˜¯ç”¨æˆ·ç©ºé—´ã€‚

![image-20220727010145487](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727010145487.png)

![image-20220727014017467](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727014017467.png)

æ¯ä¸ªè¿›ç¨‹æœ‰è‡ªå·±çš„ç”¨æˆ·ç©ºé—´ï¼Œä¹Ÿå°±æœ‰è‡ªå·±çš„ç”¨æˆ·é¡µè¡¨ã€‚ä½†æ˜¯å†…æ ¸åªæœ‰ä¸€ä»½ï¼Œæ‰€ä»¥å¯ä»¥ç†è§£ä¸º**æ‰€æœ‰çš„è¿›ç¨‹å…±äº«å†…æ ¸çš„é¡µè¡¨**ï¼Œè¿›è€Œç†è§£æˆå†…æ ¸çš„ä»£ç å’Œæ•°æ®æ˜¯è¿›ç¨‹é—´å…±äº«çš„ã€‚

å†…æ ¸æ€çš„æƒé™æ¯”ç”¨æˆ·æ€é«˜ï¼Œè¯´æ˜ç”¨æˆ·æ€åšçš„å†…æ ¸æ€éƒ½èƒ½åšï¼Œä½†æ˜¯ä¸ºäº†ç³»ç»Ÿçš„å®‰å…¨OSä¾æ—§ä¼šä¿è¯å†…æ ¸æ€å°±åªè¿è¡Œå†…æ ¸çš„ä»£ç ï¼Œè€Œä¸å»è¿è¡Œç”¨æˆ·çš„ä»£ç ï¼Œå› ä¸ºæœ€å¼€å§‹æˆ‘ä»¬å°±è®²è¿‡ï¼ŒOSä¸ä¿¡ä»»ä»»ä½•äººï¼Œå¦‚æœç”¨æˆ·å†™äº†ä¸€æ®µæ¶æ„ç¨‹åºè¢«ä»¥å†…æ ¸æ€çš„æƒé™è¿è¡Œäº†å°±ä¼šé€ æˆä¸€äº›é—®é¢˜ã€‚

### å¤„ç†çš„å¤§æ¦‚è¿‡ç¨‹

> å¤§æ¦‚è¿›ç¨‹ï¼Œå¹¶æœªæ·±ç©¶ç»†èŠ‚

å¤„ç†ä¿¡å·æ—¶ï¼Œç”¨æˆ·æ€ä¸å†…æ ¸æ€çš„å˜åŒ–ã€‚

> æ¯”å¦‚è°ƒç”¨ä¸€ä¸ªç³»ç»Ÿå‡½æ•°ï¼Œåœ¨ç”¨æˆ·æ€å‡†å¤‡å‡½æ•°ï¼Œåœ¨å†…æ ¸æ€å®ŒæˆåŠŸèƒ½ã€‚

![image-20220727013636689](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727013636689.png)

è§‚å¯Ÿä¸Šé¢çš„å›¾å¯ä»¥å‘ç°ï¼Œä¿¡å·æ•æ‰çš„æ–¹æ³•æ˜¯åœ¨ç”¨æˆ·æ€æ‰§è¡Œçš„ï¼Œè¿™é‡Œå°±å¿…é¡»è¦æä¸€ä¸‹äº†ï¼Œå†…æ ¸æ€è‚¯å®šæ˜¯å¯ä»¥æ‰§è¡Œæˆ‘ä»¬å†™çš„æ–¹æ³•çš„ï¼Œä½†æ˜¯OSä¸ç›¸ä¿¡ä»»ä½•äººï¼Œæ‰€ä»¥è¿˜æ˜¯ä¼šåˆ‡æ¢å›ç”¨æˆ·æ€å»æ‰§è¡Œã€‚

å…³äºç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„åˆ‡æ¢ï¼ŒCPUä¸­æœ‰ä¸€ä¸ªå­—æ®µæ ‡å¿—ç€çº¿ç¨‹çš„è¿è¡ŒçŠ¶æ€ï¼Œç”¨æˆ·æ€å’Œå†…æ ¸æ€å¯¹åº”ç€ä¸åŒçš„å€¼ã€‚æ­¤å¤–å†…æ ¸æ€å’Œç”¨æˆ·æ€çš„åˆ‡æ¢æ¶‰åŠå¾ˆå¤šä¸œè¥¿ï¼Œæ‰€ä»¥æ˜¯æ¯”è¾ƒè€—èµ„æºçš„ã€‚

> åšå®¢èµ„æ–™ğŸ‘‰[ç”¨æˆ·æ€ä¸å†…æ ¸æ€ä¹‹é—´åˆ‡æ¢è¯¦è§£](https://blog.csdn.net/qq_40276626/article/details/119979930)

ä¸Šé¢é‚£å‰¯å›¾æ˜¯æœ‰ç‚¹éš¾è®°å¿†çš„ï¼Œå¤§é¢˜è¿‡ç¨‹å¯ä»¥æŠ½è±¡æˆæ›´ç®€å•çš„å›¾

æœ‰ä¿¡å·çš„å¤„ç†

![image-20220727095144660](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727095144660.png)

æ²¡æœ‰ä¿¡å·å¤„ç†

![image-20220727095223598](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727095223598.png)

ä¸¤å¹…å›¾å¯¹æ¯”å¯ä»¥çœ‹åˆ°ä¸€ä¸ªè¦åˆ‡æ¢å››æ¬¡çŠ¶æ€ï¼Œä¸€ä¸ªè¦åˆ‡æ¢ä¸¤æ¬¡ï¼Œä¸­é—´å·®çš„ä¸¤æ¬¡å°±æ˜¯å³è¾¹é‚£ä¸ªä¸‰è§’å½¢ä¸ç›´çº¿çš„é‚£ä¸¤ä¸ªäº¤ç‚¹ã€‚

å…¶å®ä¸æ­¤åŒæ—¶è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯å¦‚æœå¤„ç†ä¿¡å·çš„è¿‡ç¨‹ä¸­åˆæ¥äº†ä¸€ä¸ªä¿¡å·å‘¢ï¼Ÿæ¢å¥è¯è¯´å¤šä¸ªä¿¡å·å‘é€è¿‡æ¥ï¼Œæˆ‘ä»¬å¯åªæœ‰ä¸€å¼ ä½å›¾ï¼Œæ“ä½œç³»ç»Ÿå¯¹äºè¿™ç§åœºæ™¯çš„å¤„ç†ï¼š**æ™®é€šä¿¡å·**åªæ‰§è¡Œä¸€æ¬¡ï¼Œå…¶ä½™çš„ä¿¡å·ä¼šè¢«â€œä¸¢å¤±â€ï¼Œæˆ–è€…è¯´åŒä¸€ç§ä¿¡å·æœ€å¤šæ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœå‡ºç°å¤šæ¬¡é‚£å°±é‡‡ç”¨è¦†ç›–çš„æ–¹å¼ï¼Œä½†ä¹Ÿæ­£æ˜¯å› ä¸ºè¦†ç›–çš„æ–¹å¼å¯èƒ½ä¼šé€ æˆå†…å­˜æ³„æ¼ï¼ˆä¸‹é¢é‚£ä¸ªå¤§ä½¬çš„åšå®¢é‡Œæœ‰å…·ä½“çš„åœºæ™¯ï¼‰ã€‚å®æ—¶ä¿¡å·ä¼šè¢«æ”¾è¿›ä¸€ä¸ªé“¾è¡¨ä¸‹æ¬¡å†å¤„ç†ï¼Œå› ä¸ºå®æ—¶ä¿¡å·ä¸å…è®¸ä¸¢å¤±ã€‚

> å¤§ä½¬å¯¹å¤šä¸ªä¿¡å·çš„å¤„ç†æƒ…å†µå¥—å…¥äº†å…·ä½“åœºæ™¯ğŸ‘‰[ å¤„ç†å¤šä¸ªä¿¡å·æ—¶äº§ç”Ÿçš„é—®é¢˜_æºªå­Ÿç¾½çš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/triplecc/article/details/24808295)

# ä¿¡å·çš„æœ¬è´¨

å› ä¸ºä¿¡å·ä¸æ˜¯ç«‹å³å¤„ç†çš„ï¼Œæ‰€ä»¥ä¿¡å·è‚¯å®šè¦è¢«ä¿å­˜èµ·æ¥ã€‚é‚£åœ¨å“ªé‡Œä¿å­˜å‘¢ï¼Ÿè¿›ç¨‹çš„PCBï¼Œlinuxä¸‹å°±æ˜¯task_structï¼Œæ€ä¹ˆå»ä¿å­˜å‘¢ï¼Œé€šè¿‡ä½å›¾ï¼ˆä½å›¾çš„å®ç°ä¸å®šï¼Œå¯ä»¥æ˜¯æ•°ç»„å¯ä»¥æ˜¯æ•°å­—ç­‰ç­‰ï¼‰ã€‚

OSå‘é€ä¸€ä¸ªä¿¡å·ï¼Œä¹‹åè¿›ç¨‹æ”¶åˆ°ä¸€ä¸ªä¿¡å·ï¼Œå…¶æœ¬è´¨å°±æ˜¯task_structé‡Œçš„æŒ‡é’ˆæŒ‡å‘çš„pendingä½å›¾æ”¹äº†ã€‚

> å…³äºOSå‘é€ä¿¡å·ï¼ŒOSæ˜¯è¿›ç¨‹çš„ç®¡ç†è€…ï¼Œè‡ªç„¶æ˜¯å¯ä»¥å¯¹è¿›ç¨‹çš„æ•°æ®è¿›è¡Œæ›´æ”¹çš„ï¼ˆ0->1)ã€‚

ä¿¡å·çš„å…·ä½“æ‰§è¡Œçš„æœ¬è´¨å°±æ˜¯é€šè¿‡ç´¢å¼•æ‰¾åˆ°å‡½æ•°æŒ‡é’ˆå»æ‰§è¡Œç›¸åº”çš„å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°å¯ä»¥æ˜¯ç³»ç»Ÿé»˜è®¤ç»™çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„ï¼ˆä¿¡å·æ•æ‰ï¼‰ã€‚

æ­¤æ—¶ï¼Œå†å›è¿‡å»çœ‹ä¿¡å·äº§ç”Ÿçš„å‡ ç§æ–¹å¼ï¼Œå°±å¯ä»¥çŸ¥é“ï¼šä¿¡å·ä¸ç®¡æ˜¯å“ªç§æ–¹å¼äº§ç”Ÿçš„ï¼Œ**è‚¯å®šéƒ½è¦ç»è¿‡OS**ã€‚ç®€è€Œè¨€ä¹‹ï¼Œä¿¡å·ç»è¿‡OSæ‰èƒ½é€šçŸ¥åˆ°è¿›ç¨‹ã€‚

# ä»£ç å®è·µ

ä¹‹å‰è¯´çš„éƒ½æ˜¯ç†è®ºï¼Œä¸‹é¢ç®€å•äº†è§£ä¸€ä¸‹ç³»ç»Ÿç»™æˆ‘ä»¬çš„æ¥å£ï¼Œä»¥åŠæ¥å£çš„ç®€å•ä½¿ç”¨ã€‚

## signalå‡½æ•°æ•æ‰ä¿¡å·

```c
typedef void (*sighandler_t)(int);
sighandler_t signal(int signum, sighandler_t handler);
```

å¯¹ç¼–å·ä¸ºsignumçš„ä¿¡å·è¿›è¡Œæ•æ‰ï¼Œæ•æ‰åä¿¡å·æ‰§è¡Œçš„æ–¹æ³•ä¸ºhandleræŒ‡å‘çš„å‡½æ•°.ï¼ˆhandleræ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼‰

| signum  | ä¿¡å·ç¼–å·                                               |
| ------- | ------------------------------------------------------ |
| handler | å‡½æ•°æŒ‡é’ˆï¼Œå¯ä»¥ä¼ SIG_IGNã€SIG_DFLã€æŒ‡å‘è‡ªå®šä¹‰å‡½æ•°çš„æŒ‡é’ˆ |

> è‡ªå®šä¹‰å‡½æ•°è¿”å›å€¼æ˜¯void,å‚æ•°æ˜¯int

![image-20220727151539276](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727151539276.png)

| SIG_IGN | æ•æ‰åˆ°ä¹‹åè¿™ä¸ªä¿¡å·çš„ä½œç”¨è®¾ç½®ä¸ºå¿½ç•¥                           |
| ------- | ------------------------------------------------------------ |
| SIG_DFL | æ•æ‰åˆ°ä¹‹åè¿™ä¸ªä¿¡å·çš„ä½œç”¨è®¾ç½®ä¸ºé»˜è®¤ï¼Œç›¸å¯¹ä¸€éƒ¨åˆ†ä¿¡å·é»˜è®¤éƒ½æ˜¯ç»ˆæ­¢è¿›ç¨‹ |

> å¿½ç•¥å’Œé˜»å¡æ˜¯ä¸åŒçš„æ¦‚å¿µï¼Œé˜»å¡æ˜¯æ— æ³•é€’è¾¾ï¼Œå¿½ç•¥æ˜¯é€’è¾¾äº†ï¼Œä¸è¿‡æ•ˆæœå°±æ˜¯è¿›ç¨‹å½“åšæ²¡çœ‹è§ä»–ã€‚

### ä¾‹å­

 æ•æ‰1-31ä¸ªæ™®é€šä¿¡å·ã€‚

> The signals SIGKILL and SIGSTOP cannot be caught or ignored.
>
> 9å·ä¿¡å·æ˜¯ç®¡ç†å‘˜ä¿¡å·ï¼Œæ— æ³•æ•æ‰ã€‚å¦‚æœæ‰€æœ‰çš„ä¿¡å·éƒ½èƒ½è¢«æ•æ‰ï¼Œé‚£æˆ‘ä»¬å°±æ€ä¸æ‰è¿™ä¸ªå·²ç»è·‘èµ·æ¥çš„è¿›ç¨‹äº†ã€‚å› æ­¤éœ€è¦ä¸€ä¸ªç®¡ç†å‘˜ä¿¡å·ï¼Œå½“å…¶ä»–ä¿¡å·éƒ½è¢«æ•æ‰äº†ï¼Œå°±å¯ä»¥ç”¨9å·ä¿¡å·ç»ˆæ­¢è¿›ç¨‹ã€‚19å·SIGSTOPä¹Ÿä¸èƒ½ï¼Œä½†æ˜¯19å·ä¿¡å·æ˜¯æš‚åœè¿›ç¨‹è€Œä¸æ˜¯æ€æ‰è¿›ç¨‹ã€‚

```cpp
#include <iostream>
#include<unistd.h>
#include<sys/types.h>
#include <signal.h>
#include<cstdio>
using namespace std;

void handler(int signum)
{
  cout<<"signum: "<<signum<<endl;
}

int main()
{
  for(int i=1;i<=31;i++)
  {
    signal(i,handler);//æ•æ‰ä¿¡å·
  }
  while(1)
  {
      ;
  }
  return 0;
}

```

å…ˆè¯•ç€æ•æ‰ä¿¡å·ï¼Œå†ç”¨kill -19æš‚åœè¿›ç¨‹ï¼Œå†ç”¨kill -9æ€æ‰è¿›ç¨‹ã€‚

![image-20220727154628271](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727154628271.png)

## core dump

core dumpï¼Œå³æ ¸å¿ƒè½¬å‚¨ï¼Œç¨‹åºå´©äº†ä¼šäº§ç”Ÿcoreæ–‡ä»¶ï¼Œ**ä½œç”¨æ˜¯åˆ©äºè°ƒè¯•**ï¼Œå¯ä»¥å¸®æˆ‘ä»¬å¿«é€Ÿå®šä½é”™è¯¯ã€‚æ‰€ä»¥ä¹Ÿå¯ä»¥çœ‹å‡ºcore dumpæ˜¯ä¸€ç§äº‹åè°ƒè¯•ã€‚

coreæ–‡ä»¶æœ¬è´¨æ˜¯å†…å­˜çš„ä¸€ä»½æ˜ åƒã€‚

> äº‘æœåŠ¡å™¨ï¼ˆçº¿ä¸Šç¯å¢ƒï¼‰ä¸ºä»€ä¹ˆé»˜è®¤ä¸éœ€è¦coreæ–‡ä»¶ï¼ŒæœåŠ¡å´©äº†ç¬¬ä¸€ä»¶äº‹éƒ½æ˜¯é‡å¯æœåŠ¡å™¨ï¼Œå¦‚æœåˆšé‡å¯æœåŠ¡å™¨åˆå´©äº†åˆç”Ÿæˆä¸€ä¸ªcoreæ–‡ä»¶ï¼Œåé¢æŠŠç£ç›˜å¡æ»¡äº†ç³»ç»Ÿå¯èƒ½éƒ½æ‰“ä¸å¼€ã€‚ï¼ˆæœåŠ¡å™¨å¦‚æœæ˜¯è‡ªåŠ¨é‡å¯çš„ï¼Œç›¸å½“äºä¸€ç›´é‡å¯ä¸€ç›´å´©ä¸€ç›´å¾€ç£ç›˜é‡Œå†™ã€‚ï¼‰æ‰€ä»¥äº‘æœåŠ¡å™¨**é»˜è®¤**æ˜¯ä¸ç”Ÿæˆcoreæ–‡ä»¶ã€‚
>
> äº‘æœåŠ¡å™¨ä¸Šç”Ÿæˆcoreæ–‡ä»¶éœ€è¦é€šè¿‡ulimit -aé€‰é¡¹è¿›è¡Œè®¾ç½® ã€‚
>
> ![image-20220727160137251](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727160137251.png)

### **ä¾‹å­1**

æˆ‘ä»¬ä¸Šé¢æåˆ°è¿‡é™¤0é”™è¯¯å¯¼è‡´çš„å´©æºƒæœ¬è´¨æ˜¯OSå‘8å·ä¿¡å·ç»ˆæ­¢äº†è¿›ç¨‹ï¼Œé‚£æˆ‘ä»¬äººä¸ºçš„å‘é€8å·ä¿¡å·çœ‹çœ‹ä¼šä¸ä¼šç”Ÿæˆcoreæ–‡ä»¶ã€‚

```cpp
#include <iostream>
#include<unistd.h>
#include<sys/types.h>
#include <signal.h>
#include<cstdio>
using namespace std;
int main()
{
  while(1)
  {
      ;
  }
  return 0;
}
```

![image-20220727162443747](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727162443747.png)

å¦‚æœç¨‹åºå› ä¸ºè‡ªå·±çš„åŸå› å´©äº†ï¼Œgdbè°ƒè¯•å¯ä»¥è‡ªåŠ¨å®šä½åˆ°é‚£ä¸€è¡Œï¼Œè€Œä¸”ç›¸å½“å‡†ç¡®
å¦‚æœè‡ªå·±å†™çš„ç¨‹åºå´©äº†ä¸€ç›´è°ƒè¯•ä¸å‡ºæ¥ï¼Œå¯ä»¥é€šè¿‡ç”Ÿæˆcoreæ–‡ä»¶çš„æ–¹æ³•è¿›å…¥gdbè°ƒè¯•ã€‚

### **ä¾‹å­2**

ä¹‹å‰è¿›ç¨‹é€€å‡ºç é‚£ä¸€å—æœ‰ä¸ªstatusï¼Œè¡¨ç¤ºè¿›ç¨‹é€€å‡ºçš„çŠ¶æ€ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªæ¯”ç‰¹ä½å°±è¡¨ç¤ºæ˜¯å¦core dumpï¼Œå½“æ—¶æ²¡æï¼Œç°åœ¨å¯¹å…¶è¿›è¡ŒéªŒè¯ã€‚

> statusçš„ä»‹ç»ğŸ‘‰[Linuxä¸‹çš„è¿›ç¨‹æ§åˆ¶_](https://blog.csdn.net/m0_53005929/article/details/125551796?spm=1001.2014.3001.5502)

![image-20220727163243309](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727163243309.png)

å¼‚å¸¸ç»ˆæ­¢æ—¶ï¼Œä½ä¸ƒä½è¡¨ç¤ºç»ˆæ­¢ä¿¡å·ï¼Œç¬¬å…«ä½è¡¨ç¤ºæ˜¯å¦core dumpã€‚

éªŒè¯core dumpçš„æ€è·¯ï¼šåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œè®©å­è¿›ç¨‹ä¸€æ®µæ—¶é—´åæ‰§è¡Œä¸€æ®µè®©ç¨‹åºå´©æºƒçš„ä»£ç ï¼Œæ¯”å¦‚é™¤é›¶ï¼Œç„¶åçˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹çš„åŒæ—¶ï¼Œè·å–è¿™ä¸ªè¿›ç¨‹çš„é€€å‡ºç ï¼Œé€€å‡ºä¿¡å·ï¼Œå’Œcore dumpæ ‡å¿—ä½ã€‚

```cpp
#include <iostream>
#include<unistd.h>
#include<sys/types.h>
#include <sys/wait.h>
#include <signal.h>
#include<cstdio>
using namespace std;
int main()
{
  pid_t id=fork();
  if(id==0)
  {
    //child
    int cnt=5;
    while(cnt--)
    {
      cout<<"i am child,pid: "<<getpid()<<" ppid: "<<getppid()<<endl;
      sleep(1);
    }
    int a=1;
    int b=0;
    int c=a/b;
    exit(0);
  }

  //wait
  int status=0;
  if(waitpid(id,&status,0)!=-1)
  {
    //wait success
    cout<<"wait success"<<endl;
    cout<<"exit code: "<<((status>>8)&0xff)<<endl;
    cout<<"exit signal: "<<(status&0x7f)<<endl;
    cout<<"core dump: "<<((status>>7)&1)<<endl;
  }
  return 0;
}
```

è¿è¡Œæ•ˆæœ

![image-20220727171402189](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727171402189.png)

> ä¹Ÿå¯ä»¥ç”¨æ•°ç»„è¶Šç•Œã€æ‰‹åŠ¨å‘ä¿¡å·ç­‰æ–¹å¼æ›¿ä»£é™¤0å»éªŒè¯

## alarmå‡½æ•°æµ‹è¯•1sCPUèƒ½ç®—å¤šå°‘æ¬¡ã€‚

æµ‹è¯•çš„æ—¶å€™åˆ†å¸¦IOä¸ä¸å¸¦IOä¸¤ç§æƒ…å†µã€‚å…ˆç»™ç»“è®ºï¼šå¸¦IOçš„é€Ÿåº¦ä¼šå¾ˆæ…¢ï¼Œä¸¤è€…ç›¸å·®çš„æ•°é‡çº§å¤§æ¦‚æ˜¯ä¸€åƒå€ï¼Œäº‘æœåŠ¡å™¨ä¸Šéœ€è¦é€šè¿‡ç½‘ç»œç›¸å·®å¤§æ¦‚æ˜¯ä¸€ä¸‡å€ã€‚

> å¸¦IOè¿™é‡ŒæŒ‡çš„å°±æ˜¯æ‰“å°åˆ°å±å¹•ä¸Šï¼Œä¸Šæ¬¡çœ‹è¿‡ä¸€å¼ å›¾ï¼Œ**æ‰“å°ä¸€æ¡ä¿¡æ¯ç©¿é€äº†è®¡ç®—æœºç³»ç»Ÿçš„åº”ç”¨å±‚ã€æ“ä½œç³»ç»Ÿå±‚ã€é©±åŠ¨å±‚å’Œç¡¬ä»¶å±‚**ã€‚æ ¹æ®ç°æœ‰çš„çŸ¥è¯†å¯ä»¥çŸ¥é“ä½¿ç”¨printfï¼Œæ¶‰åŠåˆ°äº†æ–‡ä»¶IOï¼ŒåŠ¨é™æ€åº“ï¼Œç¡¬ä»¶çš„äº¤äº’ç­‰ï¼Œè€Œä¸æ˜¯CPUå•çº¯çš„ç´¯åŠ ï¼Œè‡ªç„¶è¿è¡Œèµ·æ¥æ˜¯æ…¢çš„ã€‚

æµ‹è¯•æ€è·¯ï¼šå¸¦IOçš„è¾¹ç®—è¾¹æ‰“å°ï¼Œä¸å¸¦IOçš„ç®—å®Œæœ€åæ‰“å°ä¸€æ¬¡ã€‚ï¼ˆè¿™é‡Œçš„â€œç®—â€æŒ‡çš„æ˜¯ç´¯åŠ ï¼‰

**å¸¦IO**

```cpp
#include <iostream>
#include<unistd.h>
#include<sys/types.h>
#include <sys/wait.h>
#include <signal.h>
#include<cstdio>
using namespace std;
int main()
{
  int cnt=0;
  alarm(1);
  while(1)
  {
    cout<<(++cnt)<<endl;
  }

  return 0;
}
```

è¿è¡Œæ•ˆæœ

![image-20220727230037091](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727230037091.png)

**ä¸å¸¦IO**

```cpp
#include <iostream>
#include<unistd.h>
#include<sys/types.h>
#include <sys/wait.h>
#include <signal.h>
#include<cstdio>
using namespace std;

int cnt=0;
void handler(int signum)
{
  cout<<cnt<<endl;
  exit(0);//æ•æ‰å®Œåé€€å‡ºè¿›ç¨‹
}
int main()
{
  signal(14,handler);

  alarm(1);
  while(1)
  {
    cnt++;
  }
  return 0;
}
```

è¿è¡Œæ•ˆæœ

![image-20220727230742931](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727230742931.png)

å¯ä»¥çœ‹åˆ°åœ¨æˆ‘çš„ç¯å¢ƒä¸‹å·®ä¸å¤šæ˜¯ä¸€ä¸‡å€çš„å·®è·ï¼Œå› ä¸ºäº‘æœåŠ¡å™¨è¿˜éœ€è¦ç»è¿‡ç½‘ç»œï¼Œå¦‚æœæ˜¯è™šæ‹Ÿæœºä¹‹ç±»çš„å·®ä¸å¤šæ˜¯ä¸€åƒå€å·¦å³ï¼Œä½†ä¹Ÿèƒ½è¯´æ˜IOæ“ä½œæ˜¯æ¯”è¾ƒæ…¢çš„ã€‚

## abortå‡½æ•°ç»“æŸè¿›ç¨‹

```c
  void abort(void);
```

ä½œç”¨å°±æ˜¯ç»™å½“å‰è¿›ç¨‹å‘ä¸€ä¸ªå…­å·ä¿¡å·SIGABRTã€‚

> äº†è§£æ›´å…·ä½“çš„å¯ä»¥man abort,é‡Œé¢æœ‰æ›´å…·ä½“çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è¿™ä¸ªä¿¡å·å¼•èµ·çš„è¿›ç¨‹ä¸­æ–­ï¼Œæ‰€æœ‰çš„æµä¼šè¢«å…³é—­å¹¶ä¸”åˆ·æ–°ã€‚

### ä¾‹å­

3såå‘é€ä¸€ä¸ªabortä¿¡å·ç»ˆæ­¢è¿›ç¨‹

```cpp
#include <iostream>
#include<unistd.h>
#include<sys/types.h>
#include <sys/wait.h>
#include <signal.h>
#include<cstdio>
using namespace std;

int main()
{
  int cnt=3;
  while(cnt--)
  {
    sleep(1);
  }
  abort();

  return 0;
}
```

è¿è¡Œæ•ˆæœ

![image-20220727231826820](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220727231826820.png)

![image-20220725004050180](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220725004050180.png)









mykillå‘½ä»¤

![image-20220725004805036](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220725004805036.png)













![image-20220726000402712](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220726000402712.png)











![image-20220726002215210](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220726002215210.png)



![image-20220726002028466](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220726002028466.png)





![image-20220726002541554](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220726002541554.png)







 













> éšç¬”è®°å½•ï¼šè¿›ç¨‹çš„åˆ‡æ¢æœ¬è´¨æ˜¯åœ¨è¿›ç¨‹ä¸Šä¸‹æ–‡ä¸­åˆ‡æ¢ã€‚



[Linux ä¿¡å·è¡¨ - wiessharling - åšå®¢å›­ (cnblogs.com)](https://www.cnblogs.com/wiessharling/p/4105287.html)



[åŒæ­¥å’Œå¼‚æ­¥çš„æ¦‚å¿µ - rainbow70626 - åšå®¢å›­ (cnblogs.com)](https://www.cnblogs.com/rainbow70626/p/8094199.html)

[ç»†ç»†é˜…è¯»ï¼Œ3å¼ å›¾å¸¦ä½ ç†è§£ï¼Œé›¶æ‹·è´ï¼Œmmapå’ŒsendFile_c++_å¥”ç€è…¾è®¯å»_InfoQå†™ä½œç¤¾åŒº](https://xie.infoq.cn/article/a34cf4d2c6556d6c81be17303#:~:text=ä¹‹æ‰€ä»¥èƒ½å¤Ÿå‡å°‘ä¸€æ¬¡æ‹·è´ï¼Œå°±æ˜¯å› ä¸º mmap,ç›´æ¥å°†ç£ç›˜æ–‡ä»¶æ•°æ®æ˜ å°„åˆ°å†…æ ¸ç¼“å†²åŒºï¼Œè¿™ä¸ªæ˜ å°„çš„è¿‡ç¨‹æ˜¯åŸºäº DMA æ‹·è´çš„ï¼ŒåŒæ—¶ç”¨æˆ·ç¼“å†²åŒºæ˜¯è·Ÿå†…æ ¸ç¼“å†²åŒºå…±äº«ä¸€å—æ˜ å°„æ•°æ®çš„ï¼Œå»ºç«‹å…±äº«æ˜ å°„ä¹‹åï¼Œå°±ä¸éœ€è¦ä»å†…æ ¸ç¼“å†²åŒºæ‹·è´åˆ°ç”¨æˆ·ç¼“å†²åŒºäº†ã€‚)





![image-20220726105212603](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220726105212603.png)



![image-20220726110008402](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220726110008402.png)

sa_maskå°±æ˜¯ä¸æƒ³åœ¨å¤„ç†çš„æ—¶å€™è®©åˆ«çš„ä¿¡å·æ¥æ‰“æ‰°ä»–ï¼ˆå¸Œæœ›å±è”½åˆ«çš„ä¸€äº›ä¿¡å·ï¼‰



ä¿¡å·äº§ç”Ÿå¤šæ¬¡ åªæœ‰ä¸€ä¸ªä½å›¾

![image-20220726110810459](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220726110810459.png)





![image-20220726111311304](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220726111311304.png)



![image-20220726111401288](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220726111401288.png)







æ™®é€šä¿¡å·å…è®¸ä¸¢å¤± å®æ—¶ä¿¡å·ä¸ä¼š

![image-20220726111949958](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220726111949958.png)









çˆ¶å­è¿›ç¨‹å…±äº«ä»£ç 



é‡å…¥ï¼Œé‡å¤è¿›å…¥

![image-20220726112732522](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220726112732522.png)



![image-20220726113140918](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220726113140918.png)

![image-20220726113224148](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220726113224148.png)

vlotile

g++ç¼–è¯‘

![image-20220726150847422](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220726150847422.png)



gccç¼–è¯‘

![image-20220726151553260](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220726151553260.png)



![image-20220726151816529](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220726151816529.png)



volatileä¸€æ—¦ä¿®é¥°å˜é‡  ä¿è¯äº†å†…å­˜å˜é‡çš„å¯è§æ€§ã€‚ç›¸å½“äºå‘Šè¯‰ç¼–è¯‘å™¨ä½ æ¯æ¬¡è¯»è¿™ä¸ªå˜é‡çš„å€¼ï¼Œéƒ½å…ˆæŠŠå˜é‡ä»å†…å­˜æ‹·è´åˆ°å¯„å­˜å™¨ä¸­å†å»è¯»ï¼Œè€Œä¸æ˜¯ç›´æ¥ä»å¯„å­˜å™¨ä¸­è¯»ã€‚



![image-20220726153406542](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220726153406542.png)





![image-20220726154745531](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220726154745531.png)





![image-20220726155024674](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220726155024674.png)





































